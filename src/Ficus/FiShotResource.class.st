"
Resource with sample Ficus metalevel objects.
"
Class {
	#name : #FiShotResource,
	#superclass : #Object,
	#category : #'Ficus-Tests'
}

{ #category : #resources }
FiShotResource >> classA [

	^ FiClass builder 
		theName: #A;
		layout: (self fixedLayoutWithSlotsNamed: #('a1' 'a2'));
		methods: (FiSet withValues: { 
			self methodWith: 'sum  ^ a1 + a2'.
			self methodWith: 'sum42  ^ self sum + 42'. });
		new.
]

{ #category : #resources }
FiShotResource >> classB [

	^ FiClass builder 
		theName: #B;
		superclass: #A;
		layout: (self fixedLayoutWithSlotsNamed: #('b1'));
		methods: (FiSet withValues: { 
			self methodWith: 'sum  ^ super sum + b1'.
			self methodWith: 'variableInSuper  ^ a1'.
			self methodWith: 'defaultClass  ^ C'.
			});
		new.
]

{ #category : #resources }
FiShotResource >> classC [

	^ FiClass builder 
		theName: #C;
		layout: (self fixedLayoutWithSlotsNamed: #());
		methods: (FiSet withValues: { 
			self methodWith: 'sum  ^ 0'.
			self methodWith: 'undeclared  ^ undeclaredVar' });
		new.
]

{ #category : #resources }
FiShotResource >> environmentWithClassesABC [

	^ FiSet withValues: { self packageXWithClassesABC }
]

{ #category : #resources }
FiShotResource >> fixedLayoutWithSlotsNamed: slotNames [
	
	^ FiFixedLayout builder
		slotNames: (FiSet withValues: slotNames);
		new
]

{ #category : #private }
FiShotResource >> methodWith: sourceCode [
	
	^ FiMethod builder
		selector:  (RBParser parseMethod: sourceCode) selector;
		protocol: #autogenerated;
		sourceCode: sourceCode;
		new

]

{ #category : #resources }
FiShotResource >> packageXWithClassesABC [
	
	^ FiPackage builder
		theName: #X;
		contents: (FiSet withValues: { self classA. self classB. self classC });
		new
]
